<!DOCTYPE html>
<html>
<head>
    <link rel="shortcut icon" type="x-icon" href="Train-IT logo(1).png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Train-IT</title>
    <link rel="stylesheet" href="trainit.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/914b751213.js" crossorigin="anonymous"></script>
    
    <!-- Cookie Consent Banner Styles -->
    <style>
        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #2c3e50;
            color: white;
            padding: 20px;
            text-align: center;
            z-index: 10000;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.3);
            display: none;
            font-family: 'Poppins', sans-serif;
        }
        
        .cookie-banner.show {
            display: block;
        }
        
        .cookie-banner h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }
        
        .cookie-banner p {
            margin: 0 0 20px 0;
            line-height: 1.5;
            font-size: 14px;
        }
        
        .cookie-banner .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .cookie-banner button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.3s ease;
            min-width: 120px;
        }
        
        .cookie-banner button:hover {
            background: #2980b9;
        }
        
        .cookie-banner .decline {
            background: #95a5a6;
        }
        
        .cookie-banner .decline:hover {
            background: #7f8c8d;
        }
        
        @media (max-width: 768px) {
            .cookie-banner .button-group {
                flex-direction: column;
                align-items: center;
            }
            .cookie-banner button {
                width: 200px;
            }
        }
    </style>

    <!-- Cookie Management and Amplitude Loading -->
    <script>
        (function() {
            // Cookie utility functions
            function getCookie(name) {
                const value = `; ${document.cookie}`;
                const parts = value.split(`; ${name}=`);
                if (parts.length === 2) return parts.pop().split(';').shift();
            }
            
            function setCookie(name, value, days) {
                const expires = new Date();
                expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));
                document.cookie = `${name}=${value};expires=${expires.toUTCString()};path=/;SameSite=Lax`;
            }

            // Global variables
            window.amplitudeConsent = getCookie('amplitude_consent');
            window.amplitudeInitialized = false;

            // Load Amplitude with Anti-Flicker snippet
            function loadAmplitudeWithAntiFlicker() {
                // Anti-flicker snippet from Amplitude documentation
                (function(d, h){
                    var apiKey = "4d655fcbcda0c92c13b5b0042bccdcca";
                    var timeout = 1000;
                    var id = "amp-exp-css";
                    
                    try {
                        if (!d.getElementById(id)) {
                            // Create anti-flicker style
                            var st = d.createElement("style");
                            st.id = id;
                            st.innerText = "* { visibility: hidden !important; background-image: none !important; }";
                            h.appendChild(st);
                            
                            // Remove anti-flicker after timeout
                            window.setTimeout(function () {
                                if (st && st.parentNode) st.remove();
                            }, timeout);
                            
                            // Load Web Experiment script with Segment integration
                            var sc = d.createElement("script");
                            sc.src = "https://cdn.amplitude.com/script/" + apiKey + ".experiment.js?integration=segment";
                            sc.async = true;
                            sc.onerror = function () {
                                if (st && st.parentNode) st.remove();
                            };
                            sc.onload = function() {
                                if (st && st.parentNode) st.remove();
                            };
                            h.insertBefore(sc, d.currentScript || h.lastChild);
                        }
                    } catch(e) {
                        console.error('Error loading Web Experiment:', e);
                    }
                })(document, document.head);
            }

            // Initialize Amplitude Analytics
            function initializeAmplitude() {
                try {
                    // Initialize Session Replay
                    var sessionReplayTracking = window.sessionReplay.plugin({sampleRate: 1});
                    window.amplitude.add(sessionReplayTracking);
                    
                    // Initialize Amplitude Analytics
                    window.amplitude.init('4d655fcbcda0c92c13b5b0042bccdcca', {
                        fetchRemoteConfig: true,
                        autocapture: {
                            attribution: true,
                            pageViews: true,
                            sessions: true,
                            fileDownload: false,
                            formInteractions: false,
                            elementInteractions: false
                        },
                    });

                    // Set opt-out based on consent
                    const shouldOptOut = window.amplitudeConsent !== 'accepted';
                    window.amplitude.setOptOut(shouldOptOut);
                    
                    // Initialize Web Experiment
                    if (window.Experiment && window.amplitudeConsent === 'accepted') {
                        const experiment = window.Experiment.initializeWithAmplitudeAnalytics('');
                        console.log('Amplitude Web Experiment initialized');
                    }
                    
                    window.amplitudeInitialized = true;
                    console.log('Amplitude initialized with optOut:', shouldOptOut);
                    
                } catch(error) {
                    console.error('Error initializing Amplitude:', error);
                }
            }

            // Load Amplitude scripts conditionally
            if (window.amplitudeConsent === 'accepted') {
                // User has consented, load with anti-flicker
                loadAmplitudeWithAntiFlicker();
            }

            // Global consent management functions
            window.acceptCookies = function() {
                setCookie('amplitude_consent', 'accepted', 365);
                window.amplitudeConsent = 'accepted';
                hideCookieBanner();
                
                if (!window.amplitudeInitialized) {
                    // First time acceptance, need to load scripts
                    loadAmplitudeWithAntiFlicker();
                    // Reload page to ensure anti-flicker works properly
                    setTimeout(function() {
                        window.location.reload();
                    }, 100);
                } else {
                    // Scripts already loaded, just enable tracking
                    window.amplitude.setOptOut(false);
                }
            };
            
            window.declineCookies = function() {
                setCookie('amplitude_consent', 'declined', 365);
                window.amplitudeConsent = 'declined';
                hideCookieBanner();
                
                // If Amplitude is already loaded, opt out
                if (window.amplitudeInitialized && window.amplitude) {
                    window.amplitude.setOptOut(true);
                }
                console.log('User declined tracking - Amplitude tracking disabled');
            };

            function showCookieBanner() {
                const banner = document.getElementById('cookie-banner');
                if (banner) {
                    banner.classList.add('show');
                }
            }

            function hideCookieBanner() {
                const banner = document.getElementById('cookie-banner');
                if (banner) {
                    banner.classList.remove('show');
                }
            }

            // Show banner if no consent decision has been made
            document.addEventListener('DOMContentLoaded', function() {
                if (!window.amplitudeConsent) {
                    showCookieBanner();
                }
            });

        })();
    </script>

    <!-- Load Amplitude SDK Scripts -->
    <script src="https://cdn.amplitude.com/script/4d655fcbcda0c92c13b5b0042bccdcca.js"></script>
    <script src="https://cdn.amplitude.com/libs/plugin-session-replay-browser-1.12.1-min.js.gz"></script>
    
    <!-- Initialize Amplitude when scripts are loaded -->
    <script>
        window.addEventListener('load', function() {
            if (window.amplitude && window.sessionReplay) {
                initializeAmplitude();
            }
        });
    </script>
</head>
	
<body>
    <!-- Cookie Consent Banner -->
    <div id="cookie-banner" class="cookie-banner">
        <h3>🍪 Cookie Preferences</h3>
        <p>We use cookies and analytics to improve your experience and measure website performance. This includes Amplitude analytics and A/B testing experiments.</p>
        <p><strong>Do you consent to analytics tracking?</strong></p>
        <div class="button-group">
            <button onclick="acceptCookies()">✅ Accept & Enable Analytics</button>
            <button onclick="declineCookies()" class="decline">❌ Decline Analytics</button>
        </div>
    </div>

	<section class="header">
        <nav>
            <a href="/Users/giuliano.giannini/Desktop/Projects/Training Azienda/trainingorg.html" id="logo">
                <img src="Train-IT logo(1).png" alt="Logo Azienda">
            </a>
            <div class="nav-links">
                <ul>
                    <li><a href="#home" id="homepage">Home</a></li>
                    <li><a href="#servizi" id="services">Services</a></li>
                    <li><a href="#corsi" id="courses">Courses</a></li>
                    <li><a href="#chi-siamo" id="about">About</a></li>
                    <li><a href="#contatti" id="contacts">Contacts</a></li>
                </ul>
            </div>
        </nav>
        <div class="text-box">
            <h1>Hire your tailored Technical Training services</h1>
            <h2>Adopting new technology is as vital to the business as it is scary for your employees. Fear no more and leverage highly tailored Technical Training to increase adoption from the get go.</h2>
            <br>
            <h2>Take action now and find out how we help businesses in an ever-changing Tech world keep their employees up to date with their latest software acquisitions.</h2>
            <span id="hero-hand" style="display: none;">👉   </span>
            <a href="#home" class="hero-btn" id="hero-btnn">Explore our services!</a>
            <span id="hero-hand2" style="display: none;">  👈</span>
        </div>
	</section>
	
    <section class="servizi">
        <div>
            <!-- Your services content here -->
        </div>
	</section>

    <!-- Analytics Tracking Script -->
    <script type="text/javascript">
        // Safe tracking function that respects user consent
        function safeTrack(eventName, properties) {
            if (window.amplitudeInitialized && 
                window.amplitude && 
                window.amplitudeConsent === 'accepted') {
                
                window.amplitude.track(eventName, properties);
                console.log('Event tracked:', eventName, properties);
            } else {
                console.log('Tracking skipped - no consent or Amplitude not initialized');
            }
        }

        // Wait for DOM to be ready
        document.addEventListener('DOMContentLoaded', function() {
            
            // Navigation tracking function
            function logNavButtonClick(buttonName) {
                safeTrack('Nav Button Clicked', {
                    button_name: buttonName,
                    source: "homepage",
                    timestamp: new Date().toISOString()
                });
            }

            // Add event listeners for navigation buttons
            const navElements = [
                { id: 'homepage', name: 'home' },
                { id: 'services', name: 'services' },
                { id: 'courses', name: 'courses' },
                { id: 'about', name: 'about' },
                { id: 'contacts', name: 'contacts' }
            ];

            navElements.forEach(function(nav) {
                const element = document.getElementById(nav.id);
                if (element) {
                    element.addEventListener('click', function() {
                        logNavButtonClick(nav.name);
                    });
                }
            });

            // Hero button tracking
            const heroButton = document.getElementById('hero-btnn');
            if (heroButton) {
                heroButton.addEventListener('click', function() {
                    safeTrack('Explore Services Button Clicked', {
                        button_name: "hero_btn",
                        source: "homepage",
                        timestamp: new Date().toISOString()
                    });
                });
            }

            // Track page view if consent is given
            if (window.amplitudeConsent === 'accepted') {
                setTimeout(function() {
                    safeTrack('Page Viewed', {
                        page_name: 'homepage',
                        page_title: document.title,
                        timestamp: new Date().toISOString()
                    });
                }, 1000);
            }
        });
    </script>
</body>
</html>
